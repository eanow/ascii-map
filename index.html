<head>
<script src="jquery-3.6.3.min.js"></script>
</head>

<script type="text/javascript">
draw=0;
submap="ground";
function edit_ground() {
    submap="ground";
}
function edit_walls() {
    submap="walls";
}
function edit_characters() {
    submap="characters";
}
function click_rewrite() {
    $(this).text("G")
    myCol = $(this).attr("id");
    myRow = $(this).parent().attr("id");
    $("#col_display").text(myCol);
    $("#row_display").text(myRow);
    switch(submap) {
        case "ground":
            $(".ground_map").children("#"+myRow).children("#"+myCol).text("G");
            break;
        case "walls":
            $(".wall_map").children("#"+myRow).children("#"+myCol).text("G");
            break;
        case "characters":
            $(".character_map").children("#"+myRow).children("#"+myCol).text("G");
            break;
    }
}
function fresh_map() {
    //get input
    rows=$("#num_rows").val();
    cols=$("#num_cols").val();
    
    //empty the map area
    $(".map_canvas").empty();
    //empty the holders
    $(".ground_map").empty();
    $(".wall_map").empty();
    $(".character_map").empty();
    //fill with rows worth of p elements
    for(ii=0;ii<rows;ii+=1) {
        $( ".map_canvas" ).append("<p class=\"map_pixel\" id=\""+ii+"\"></p>");
        $( ".ground_map" ).append("<p class=\"map_pixel\" id=\""+ii+"\"></p>");
        $( ".wall_map" ).append("<p class=\"map_pixel\" id=\""+ii+"\"></p>");
        $( ".character_map" ).append("<p class=\"map_pixel\" id=\""+ii+"\"></p>");
    }
    //fill each p element with cols span elements
    for (jj=0; jj< cols; jj+=1) {
        $('p.map_pixel').append("<span id=\""+jj+"\">0</span>");
    }
    console.log("Creating Fresh Map");

    $('p.map_pixel span').click(
        click_rewrite
    );

    $('p.map_pixel span').mousedown(
        function() {
            $('#state').text("Down");
            draw=1;
        }
    );

    $('p.map_pixel span').mouseup(
        function() {
            $('#state').text("Up");
            draw=0;
        }
    );

    $('p.map_pixel span').hover(
        function() {
            if (draw === 1) {
                $(this).text("G")
            }
        }
    );
}
</script>

<style type='text/css'>
p.map_pixel {
font-family: monospace;
line-height: 0em;
font-size: 30;
-moz-user-select: -moz-none;
-khtml-user-select: none;
-webkit-user-select: none;
-o-user-select: none;
user-select: none;
}
</style>
<p></p>
<div style="width: 100%; display:table;">
    <div style="display: table-row;">
        <div class="map_canvas" style="display: table-cell;">

        </div>
        <div class="palette" style="display: table-cell;">
            <button onclick="edit_ground()">Ground</button><br />
            <button onclick="edit_walls()">Walls</button><br />
            <button onclick="edit_characters()">Actors</button><br />
        </div>
    </div>
</div>
<br />
<hr>

<p>11111</p>
<p></p>
<!-- debug -->
State:<span id="state"></span>
X:<span id="col_display"></span>
Y:<span id="row_display"></span>
<br />
<!-- create map -->
<label for="num_rows">Rows:</label>
<input type="number" id="num_rows" name="Rows">
<label for="num_cols">Columns:</label>
<input type="number" id="num_cols" name="Cols">
<button onclick="fresh_map()">Create New Map</button> 
<br />
<!--holder maps-->
<div style="display: table;">
    <div style="display: table-row;"></div>
        <div class="ground_map" style="display: table-cell;"></div>
        <div style="width: 10px; display: table-cell;"></div>
        <div class="wall_map" style="display: table-cell;"></div>
        <div style="width: 10px; display: table-cell;"></div>
        <div class="character_map" style="display: table-cell;"></div>
    </div>
</div>
<!--
/*
<p>Each word will be wrapped in a span.</p>
<p>A second paragraph here.</p>
Word: <span id="word"></span>

<script type="text/javascript">
    $(function() {
        // wrap words in spans
        $('p').each(function() {
            var $this = $(this);
            $this.html($this.text().replace(/\b(\w+)\b/g, "<span>$1</span>"));
        });

        // bind to each span
        $('p span').hover(
            function() { $('#word').text($(this).css('background-color','#ffff66').text()); },
            function() { $('#word').text(''); $(this).css('background-color',''); }
        );
    });
</script>
*/
-->